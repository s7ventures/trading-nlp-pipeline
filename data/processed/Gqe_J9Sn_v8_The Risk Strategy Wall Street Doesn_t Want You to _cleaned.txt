risk parody portfolio allocation um this we're going back to well I put a lot more way to spoil the party risk I know right R all right I'll go on the internet we got Julia and Jacob back to back today way way to spoil the whole holiday hey I think this is a fun one I put a lot more pictures in this one compared to the one from last week yeah we got pictures this time uh and it's also this is a back of the envelope calculation which I think is kind of fun this is more for an equities portfolio it's a little bit more nuanced uh when you want apply something like this to options uh because you want to keep in mind obviously position size and you would want to me measure risk in a different way so this is kind of the classic one for an equities portfolio but I still think the concept's really interesting so I wanted to talk about it yeah okay let's do let's do it okay so um last week we Dove down this whole rabbit hole in a modern portfolio Theory as an approach to diversifying a portfolio this was the kind of continuation of that uh whole portfolio diversification portfolio allocation sort of series that we're talking talking about and today I wanted to talk about this method which can be used to um determine portfolio weights based on the allocation of risk rather than the allocation of capital which I think is a very interesting concept make sense okie dokie sure easy peasy right like nothing okay A little bit of background okay so portfolio allocation strategy they typically focus on allocations of capital um that are most likely to achieve a certain level of risk a certain level of reward a certain level of diversification so for for this kind of example let's just talk moderate growth equities portfolio 6040 this is going to be kind of hybrid 60% stocks and 40% bonds and metals so to keep it simple our portfolio is going to have spy QQQ Apple TLT and gold 20% allocated to each right yeah yeah moderate growth equities portfolio Okay so when we take these five elements with equal Capital allocations to each our capital allocations on this chart are represented in red and you can see they're all even right um when you look at the risk contributions not exactly the same thing as volatility risk contributions a different calculation but when you look at the risk contributions of each of those components from 2015 to 2022 in white you can actually see that spy QQQ and apple have much greater risk contributions um compared to TLT and GLD which is what you would expect right they're much lower volatility assets so if you're allocating kind of 20% of your Capital to each you would kind of expect that Apple would you know as a more volatile asset contribute a lot more risk to this portfolio the total portfolio volatility is 13.7% the the risk contribution of apple is about 5% so a lot of that's coming from Apple and then you got um good amount coming from NASDAQ good amount coming from Spy and then very little coming from TLT and gold which is again expect like right right yes sure right okay so the idea of a risk parody portfolio is that we kind of want all of these components to sort of contribute equal amounts of risk to the portfolio overall and to figure out what weights we would need in order to achieve that and it really focuses on this idea of allocating risk rather than allocating capital and so this is a risk parity portfolio um an example of that and you can see those white bars those risk contributions are a lot more even this you know risk parody portfolio has you know a volatility of about 10% with about 2% coming from each and you can see there's a much greater emphasis on TLT and GLD when you do this risk parity approach and then much less allocated to Apple and the NASDAQ and spy right yes yes yes kind of makes sense yeah so the actual process of calculating the weights for a risk parody portfolio is actually a pretty intense numerical optimization problem that I'm going to dive into more on bad Trader because we got more time there but there's a nice like naive back of the envelope calculation um that I wanted to kind of cover it doesn't get as close to the true risk parody as I'd like but it gets you a little bit closer than the sort of original idea of just equal weight Capital allocation yeah okay so we're going to show some math but it's actually not as bad as it looks we'll go through a numerical example in a second um but when we look at naive risk parity allocation it's sometimes called inverse volatility waiting we the goal really is to give a higher waiting to lower volatility assets and vice versa so the risk contribution is a little bit more even it's a little roughly the same across assets although I'll show the actual results in a second it doesn't get as close as actual risk parity but it's you know for a back of the envelope calculation not that bad this is the equation I'll show again a numerical breakdown in a second but basically to determine the weight for each asset we want we want to take one over the volatility of the asset divided by the sum over one over the volatility of all the Assets in the portfolio that we're looking at um for n Assets in our portfolio is what this equation is kind of looking at does that make sense yeah that's how exactly how we we that's the back of the envelope I mean I don't know the formula but that's the back of the envelope approach we use right now sure yeah it's probably the back of the envelope thing that you do in your head although I will say um for options to be a little bit different CU here I'll show the example we don't we don't we don't do it with options I mean we do it with the underlying right so yeah so this I think has interesting applications and options but again this process is more for an equities portfolio because the way that you measure risk is obviously different with options and this kind of assumes a fully allocated portfolio whereas we want to control our position sizes um when it comes to options so there's more Nuance there uh but the equi scenario is a little bit more interesting and um so here for example we got our let's let's go back you know at our example portfolio spy QQQ Apple TLT and gold 2015 to 2022 we have all of our daily returns right during that period so first things first we're going to calculate our standard deviation of daily returns of that asset for so for spyes about 1.14% makes sense daily returns volatility about 1.14% historically QQ is 1.40 Apple 1.83 Etc um you can also use IV here in place of historical volatility which is actually kind of cool so if you don't want to calculate it yourself you can just pull it from a platform and then plug it into that formula that I showed but first things first we got to measure risk so for equities we would use um kind of returns standard deviation right make sense yeah and then once we have that we would just kind of plug those weights into that equation so for spy for example you would take one over the volatility for Spy 1 over 1.14 and then divide it by one o like the sum of one over all of the volatilities in portfolio so 1 over 1.14 plus 1 over 1.40 for the q's plus 1 over 1.83 and so on and then you would get about 20% as your risk parity portfolio approximation waiting for spy yes okay you can use annualized volatility you can use daily volatility it kind of doesn't matter as long as all the volatilities are time scaled the same way so like IV is annualized as long as you use IV for all the assets um or as long as you use daily returns volatility as long as they're all the same um that can kind of work and why can't we just use notional times the volatility you can that that works too yeah okay but if you wanted to apply that to equities we want to be inclusive around here perhaps for all the different types of Traders this is the equity's approach but like you said it's actually very similar to some of the other types of you know strategies that options figes us it's just with different metric so if we now take this and we repeat this for all the different assets in the portfolio it gets us closer to risk parody why don't we do this again this back test from 2015 to 2022 now those white bars those risk contributions are a little bit closer to being even um and we can see that our weights as we would expect give much higher waiting to TLT and GLD with about 25% allocated to each and then closer to 12% allocated to Apple Apple Apple 20% allocated to spy and so on and then yeah those are more even risk contributions uh but it's not as close as even as the actual RIS parity can actually get you um but that being said um it is closer and for a back of the envelope calculation I think it's a pretty it's a pretty simple thing to do and it's pretty easy to understand um and it does get you a little bit closer but again true risk parity which like you probably wouldn't Implement yourself there's online tools that can be used to kind of do this calculation um but the back of the envelope way I think the process is interesting well it clearly looks a lot better than the equal weight yeah yeah right a little bit better um but that being said I think one of the drawbacks of doing this is that it really doesn't take like your expected returns goals into account we're really just trying to sort of yeah equalize sort of risk contributions to a portfolio and with the goal of maybe having a higher sharp ratio of having more stable returns over time um but depending on your goals as an investor um expected returns are obviously something you'd want to keep in mind so I wouldn't I would I don't use any of these diversification or weight techniques in a vacuum um you usually want to use it with a bunch of other stuff especially yeah for options like the way you measure risk is very different right so this isn't quite one to one got it true okay easy peasy interesting good it's a fun one right it's a fun we're going back to form a little bit um yeah and a lot more pictures this time but just to conclude risk parity portfolio allocation focuses on the allocation of risk rather than the allocation of capital with the goal of having each asset contribute roughly the same amount of risk to the portfolio overall and while true risk parity is a pretty complex optimization problem there's a naive approach that can approximate these weights with the back of the envelope calculation that places more emphasis on Lower volatility assets and vice versa and next week on bad Trader because again we have that's a live stream so we can just go into these crazy Dives we're going to go we're going to go into more of the methodology behind true risk parity and talk about our co-variance matrices and such um but this one was a bit of a a lighter version of that so I thought